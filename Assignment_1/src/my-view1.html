<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="shared-styles.html">
<script src="../bower_components/crypto-js/crypto-js.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1">

<dom-module id="my-view1">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        padding: 10px;
      }
      .title {
        text-align: center;
      }

      #key {

      }
      #enc-container {
        display:block;
        max-width: 500px;
        margin: 0 auto;
      }
      .button {
        display:block;
        text-align: center;
        margin-top: 10px;
      }
      #encrypted-message {
        white-space: pre-wrap;      /* CSS3 */
        white-space: -moz-pre-wrap; /* Firefox */
        white-space: -o-pre-wrap;   /* Opera 7 */
        word-wrap: break-word;      /* IE */
      }
      .document-text {
        max-width: 750px;
        margin: 0 auto;
      }



    </style>

    <div class="card" >
      <div id="enc-container" >
        <h1 class="title">Encrypter</h1>
        <paper-textarea id="input-text" label="Input Text:" required validate error-message="Needs some text!"></paper-textarea>

        <paper-textarea id="key" label="Key:" required validate error-message="Needs a key!"></paper-textarea>


        <paper-dropdown-menu id="dropdown" label="Encryption Algorithm:"  no-animations required error-message="Select one!">
          <paper-listbox id="algorithm" class="dropdown-content" >
            <paper-item>AES</paper-item>
            <paper-item>DES</paper-item>
            <paper-item>TripleDES</paper-item>
            <paper-item>RC4</paper-item>
            <paper-item>RC4Drop</paper-item>
            <paper-item>Rabbit</paper-item>
          </paper-listbox>
        </paper-dropdown-menu>

        <paper-button class="button" id="encrypt-button" onclick="encryptData()">Encrypt</paper-button>

        <p id="encrypted-message"></p>
      </div>
    </div>


    <div class="card">
      <h1 class="title">Cryptography</h1>

      <div class="document-text">

        <p>   Lorem ipsum dolor sit amet, consectetur adipisicing elit,
          sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          Excepteur sint occaecat cupidatat non proident, sunt
          in culpa qui officia deserunt mollit anim id est laborum.
          Lorem ipsum dolor sit amet, consectetur adipisicing
          elit, sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          Excepteur sint occaecat cupidatat non proident, sunt
          in culpa qui officia deserunt mollit anim id est laborum.</p>

        <p>   Lorem ipsum dolor sit amet, consectetur adipisicing elit,
          sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          Excepteur sint occaecat cupidatat non proident, sunt
          in culpa qui officia deserunt mollit anim id est laborum.
          Lorem ipsum dolor sit amet, consectetur adipisicing
          elit, sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          Excepteur sint occaecat cupidatat non proident, sunt
          in culpa qui officia deserunt mollit anim id est laborum.</p>

        <p>   Lorem ipsum dolor sit amet, consectetur adipisicing elit,
          sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          Excepteur sint occaecat cupidatat non proident, sunt
          in culpa qui officia deserunt mollit anim id est laborum.
          Lorem ipsum dolor sit amet, consectetur adipisicing
          elit, sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          Excepteur sint occaecat cupidatat non proident, sunt
          in culpa qui officia deserunt mollit anim id est laborum.</p>

        <p>   Lorem ipsum dolor sit amet, consectetur adipisicing elit,
          sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          Excepteur sint occaecat cupidatat non proident, sunt
          in culpa qui officia deserunt mollit anim id est laborum.
          Lorem ipsum dolor sit amet, consectetur adipisicing
          elit, sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          Excepteur sint occaecat cupidatat non proident, sunt
          in culpa qui officia deserunt mollit anim id est laborum.</p>

        <p>   Lorem ipsum dolor sit amet, consectetur adipisicing elit,
          sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          Excepteur sint occaecat cupidatat non proident, sunt
          in culpa qui officia deserunt mollit anim id est laborum.
          Lorem ipsum dolor sit amet, consectetur adipisicing
          elit, sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          Excepteur sint occaecat cupidatat non proident, sunt
          in culpa qui officia deserunt mollit anim id est laborum.</p>

      </div>
    </div>


  </template>

  <script>
    Polymer({
      is: 'my-view1'
    });

    function encryptData() {

      var txt = document.getElementById("input-text");
      var msg = document.getElementById("encrypted-message");
      var selected = document.getElementById("algorithm");
      var key = document.getElementById("key");
      var drop = document.getElementById("dropdown");
      var enc;
      var alg = " ";

      if (txt.validate() && key.validate() && selected.selected != null) {
        drop.invalid = false;
        switch (selected.selected){
          case 0:
            enc = CryptoJS.AES.encrypt(txt.value, key.value);
            alg = "AES";
            break;
          case 1:
            enc = CryptoJS.DES.encrypt(txt.value, key.value);
            alg = "DES";
            break;
          case 2:
            enc = CryptoJS.TripleDES.encrypt(txt.value, key.value);
            alg = "TripleDES";
            break;
          case 3:
            enc = CryptoJS.RC4.encrypt(txt.value, key.value);
            alg = "RC4";
            break;
          case 4:
            enc = CryptoJS.RC4Drop.encrypt(txt.value, key.value);
            alg = "RC4Drop"
            break;
          case 5:
            enc = CryptoJS.Rabbit.encrypt(txt.value, key.value);
            alg = "Rabbit";
            break;
        }

        var iv = enc.iv;
        if (selected.selected == 3 || selected.selected == 4){
          iv = "RC4 doesn't use iv.";
        }


        msg.innerHTML =
            "<strong>Encrypted text using the " + alg + " algorithm:</strong></br>"
            + "Using this key:</br>" + enc.key + "</br></br>"
            + "Using this iv:</br>" + iv + "</br></br>"
            + "Using this salt:</br>" + enc.salt + "</br></br>"
            + "Using this ciphertext:</br>" + enc.ciphertext + "</br></br>"
            + "Resulting Text in Base64:</br>" + enc;
      }
      if (selected.selected == null){
        drop.invalid = true;
      }
    }


  </script>
</dom-module>
